<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Entrar • Facecumba</title>

<link rel="preconnect" href="https://i.ibb.co" crossorigin>

<style>
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: Helvetica, Arial, sans-serif;

  /* ✅ FUNDO EXATO */
  background:#242526;

  color:#E4E6EB;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:18px;
}

/* ===== CONTAINER ===== */
.page{
  width:min(600px,100%);
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:24px;
}

/* ===== LOGO CENTRAL (GIGANTE) ===== */
.brand{
  display:flex;
  align-items:center;
  justify-content:center;
}

.brandLogo{
  width:320px;
  height:320px;
  display:flex;
  align-items:center;
  justify-content:center;
}

.brandLogo img{
  width:100%;
  height:100%;
  object-fit:contain;
  display:block;
}

/* ===== CARD LOGIN ===== */
.card{
  width:100%;
  background:#18191A;
  border-radius:20px;
  padding:20px;
  box-shadow:0 20px 50px rgba(0,0,0,.6);
}

.input{
  width:100%;
  padding:15px;
  font-size:16px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.12);
  background:#3A3B3C;
  color:#E4E6EB;
  outline:none;
}

.input:focus{
  border-color:#0866FF;
  box-shadow:0 0 0 3px rgba(8,102,255,.25);
}

.btn{
  width:100%;
  margin-top:14px;
  padding:15px;
  font-size:17px;
  font-weight:900;
  border:none;
  border-radius:14px;
  cursor:pointer;
}

.btnPrimary{
  background:#0866FF;
  color:#fff;
}

.btnGreen{
  background:#31A24C;
  color:#fff;
}

.link{
  display:block;
  margin-top:14px;
  text-align:center;
  font-size:14px;
  font-weight:700;
  color:#86B7FF;
  text-decoration:none;
}

.link:hover{text-decoration:underline}

.divider{
  height:1px;
  background:rgba(255,255,255,.12);
  margin:16px 0;
}

.msg{
  display:none;
  margin-top:14px;
  padding:10px;
  border-radius:12px;
  font-weight:700;
}

.msg.ok{background:rgba(49,162,76,.2)}
.msg.err{background:rgba(240,40,73,.2)}

/* ===== LEMBRAR-ME ===== */
.rememberRow{
  margin-top:12px;
  display:flex;
  align-items:center;
  gap:10px;
  user-select:none;
}
.rememberRow input{
  width:18px;
  height:18px;
  accent-color:#0866FF;
}
.rememberRow label{
  font-weight:800;
  color:#E4E6EB;
  cursor:pointer;
}

/* ===== MODAL ===== */
.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:9999;
}

.modal{
  width:100%;
  max-width:440px;
  background:#18191A;
  padding:20px;
  border-radius:20px;
  position:relative;
  box-shadow:0 20px 50px rgba(0,0,0,.7);
}

/* ❌ FECHAR */
.closeBtn{
  position:absolute;
  top:12px;
  right:12px;
  width:38px;
  height:38px;
  border-radius:50%;
  background:#3A3B3C;
  color:#E4E6EB;
  border:none;
  font-size:22px;
  font-weight:900;
  cursor:pointer;
}

.closeBtn:hover{ background:#4A4B4C; }

/* ===== MOBILE ===== */
@media(max-width:420px){
  .brandLogo{width:240px;height:240px}
}
</style>
</head>

<body>

<div class="page">

  <!-- LOGO -->
  <div class="brand">
    <div class="brandLogo">
      <img src="https://i.ibb.co/5ggFxcG7/Design-sem-nome.png" alt="Facecumba">
    </div>
  </div>

  <!-- LOGIN -->
  <div class="card">
    <input class="input" id="loginUser" placeholder="Usuário" autocomplete="username">
    <div style="height:12px"></div>
    <input class="input" id="loginPass" type="password" placeholder="Senha" autocomplete="current-password">

    <!-- ✅ Lembrar-me -->
    <div class="rememberRow">
      <input type="checkbox" id="rememberMe">
      <label for="rememberMe">Lembrar usuário e senha</label>
    </div>

    <button class="btn btnPrimary" onclick="login()">Entrar</button>

    <a class="link" href="#" onclick="recover();return false;">Esqueceu a senha?</a>

    <div class="divider"></div>

    <button class="btn btnGreen" onclick="openRegister()">Criar nova conta</button>

    <div class="msg" id="msg"></div>
  </div>

</div>

<!-- CADASTRO -->
<div class="overlay" id="overlay">
  <div class="modal">
    <button class="closeBtn" onclick="closeRegister()">×</button>

    <input class="input" id="regUser" placeholder="Novo usuário" autocomplete="username">
    <div style="height:12px"></div>
    <input class="input" id="regPass" type="password" placeholder="Nova senha" autocomplete="new-password">

    <button class="btn btnGreen" onclick="register()">Cadastrar</button>
  </div>
</div>

<script>
const SITE_URL = "https://marcio2307.github.io/terreiro/site.html";

/* Chaves do "lembrar-me" */
const REMEMBER_KEY = "facecumba_remember";
const REMEMBER_USER = "facecumba_saved_user";
const REMEMBER_PASS = "facecumba_saved_pass";

/* ✅ Se já estiver logado, pula a tela de login */
(function autoSkipLogin(){
  const u = (localStorage.getItem("nome_passageiro") || "").trim();
  if(u){
    location.replace(SITE_URL);
  }
})();

/* ✅ Carrega usuário/senha salvos (mesmo navegador) */
(function preloadRemember(){
  try{
    const remember = localStorage.getItem(REMEMBER_KEY) === "1";
    rememberMe.checked = remember;

    if(remember){
      const u = (localStorage.getItem(REMEMBER_USER) || "");
      const p = (localStorage.getItem(REMEMBER_PASS) || "");
      if(u) loginUser.value = u;
      if(p) loginPass.value = p;

      /* ✅ Se quiser AUTO-ENTRAR quando já estiver salvo, deixe ligado */
      if(u && p){
        // tenta entrar automaticamente
        setTimeout(() => login(true), 200);
      }
    }
  }catch(e){}
})();

function users(){return JSON.parse(localStorage.getItem("facecumba_users")||"{}")}
function save(u){localStorage.setItem("facecumba_users",JSON.stringify(u))}

function showMsg(t,ok){
  const m=document.getElementById("msg");
  m.className="msg "+(ok?"ok":"err");
  m.textContent=t;
  m.style.display="block";
}

function rememberSave(user, pass){
  if(rememberMe.checked){
    localStorage.setItem(REMEMBER_KEY, "1");
    localStorage.setItem(REMEMBER_USER, user);
    localStorage.setItem(REMEMBER_PASS, pass);
  }else{
    localStorage.setItem(REMEMBER_KEY, "0");
    localStorage.removeItem(REMEMBER_USER);
    localStorage.removeItem(REMEMBER_PASS);
  }
}

function login(isAuto=false){
  const u=loginUser.value.trim();
  const p=loginPass.value.trim();
  const us=users();

  if(!u || !p){
    if(!isAuto) return showMsg("Preencha usuário e senha", false);
    return;
  }

  if(!us[u]) return showMsg("Usuário não encontrado",false);
  if(us[u]!=p) return showMsg("Senha incorreta",false);

  /* ✅ marca sessão */
  localStorage.setItem("nome_passageiro",u);

  /* ✅ salva login/senha se marcou "lembrar-me" */
  rememberSave(u, p);

  location.href=SITE_URL;
}

function recover(){
  const u=loginUser.value.trim();
  const us=users();
  if(!u) return showMsg("Digite o usuário para recuperar a senha", false);
  if(!us[u]) return showMsg("Usuário não encontrado",false);
  showMsg("Sua senha é: "+us[u],true);
}

function openRegister(){overlay.style.display="flex"}
function closeRegister(){overlay.style.display="none"}

function register(){
  const u=regUser.value.trim();
  const p=regPass.value.trim();
  if(u.length<3||p.length<4) return alert("Dados inválidos");
  const us=users();

  if(us[u]) return alert("Esse usuário já existe");

  us[u]=p;
  save(us);
  closeRegister();
  loginUser.value=u;
  loginPass.value="";
  showMsg("Conta criada! Agora entre com sua senha.", true);
}

/* ✅ Enter para entrar */
document.addEventListener("keydown", (e)=>{
  if(e.key === "Enter"){
    login();
  }
});
</script>

</body>
</html>
